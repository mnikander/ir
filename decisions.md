|Num|YYYY-MM-DD|Replaced by| Tag        | Decision                                            | Rationale |
|---| ---      | ---       | ---        | ---                                                 | --- |
|001|2025-12-14|           | project    | maintain a decision log                             | Minimal setup which allows revisiting and understanding decisions later. Writing them down also makes decisions more specific. More elaborte documentation forms are too much effort to create and maintain for this project.|
|002|2025-12-14|           | IR         | register machine                                    | Static analysis of variable lifetimes is much easier for a register machine than a stack machine running on bytecode. Register machines are also closer to compilation targets such as C or LLVM IR.|
|003|2025-12-14|           | IR         | 3-address code                                      | 3-address code is more explicit and thus easier to read that 2-AC or 1-AC. Human-readability of the input code is an important factor, since all snippets of IR in this project, will be hand-written.|
|004|2025-12-14|           | IR         | static single assignment (SSA) form                 | Simplifies static analysis with respect to variables and their lifetimes. Makes it easier to reason about the code when there are no re-assignments within one stack frame.|
|005|2025-12-14|           | IR         | don't use LLVM IR directly                          | More flexibility to keep things simple, but also to add those things which I need such as scope/lifetime annotations and perhaps even alloc/free operations for heap memory.|
|006|2025-12-14|           | interface  | input javascript arrays/objects directly            | Less implementation and maintenance work. Easier to move quickly. No need to implement a parser and no need to update the parser every time the IR changes. Less testing surface area.|
|007|2025-12-14|           | interface  | input tuples instead of objects                     | More compact input notation. Less work to input, and it provides a more regular structure. Enums or getter functions can be used to ensure the interpreter code accesses the correct fields.|
|008|2025-12-14|           | interface  | do not verify validity of input                     | Less implementation work. The code snippets are relatively small at the moment, so writing them carefully by hand is viable. It is also some practice in writing in an assembly-like language.|
|009|2025-12-14|           | impl       | interpret Phi-nodes instead of translating to MOV   | Simpler to implement. I only have to store the current label and the preceeding label in order to implement this.|
|010|2025-12-14|           | impl       | don't include a return register in the stack frame  | No necessary, since the return register can be looked up in the caller, i.e. the call instruction which called this function.|
|011|2025-12-14|           | impl       | explicit stack frames instead of a stack pointer    | Easier to debug and reason about the interpreter code when call frames and the call stack are explicit. Runtime-performance is not a concern right now.|
|012|2025-12-14|           | impl       | use exceptions for error reporting                  | Simple to implement. There is no need to recover from input errors in this project. |
|013|2025-12-14|           | impl       | rethrow-exceptions to add the line-number           | Avoid having to pass the PC into every functino. Approach: (1) throw exceptions where they occur, (2) catch them in the main loop where the program counter is defined, (3) pre-pend the line number, and then (4) re-throw.|
|014|2025-12-14|           | impl       | switch-case instead of pattern matching             | Easier to step through the interpreter with a debugger. Not being able to define local variables inside the switch-case clauses is a real pain though. Perhaps if-else or switch-case with function calls are even better.|
|015|2025-12-14|           | IR         | function parameters as an array                     | Provide all information about the function in its declaration. Function parameters can be part of the function defintion instruction (like LLVM IR) or can have a separate instruction for each argument (like WASM).|
|016|2025-12-14|           | IR         | register names as strings instead of numbers        | Makes the input code easier to read. Makes it easier to differentiate arguments and temporary registers and allows giving similar names to different versions of a variable.|
|017|2025-12-14|           | IR         | register and argument names always start with `%`   | Makes it easy to identify what is a register and what isn't. This notation is consistent with LLVM IR.|
|018|2025-12-14|           | interface  | do not support immediate values (yet)               | Simplifies interpreter. Allowing instructions such as `Add` to take Registers or Immediate Values as arguments is immensely practical. The code would always have to check if an argument is a Register or a Constant though.|
|019|2025-12-17|           | project    | create deno.json file instead of direct imports     | Needed for CI pipeline via Github Actions. Deno automatically checks for a deno.json or package.json and installs the necessary dependencies on the system.|
|020|2025-12-30|           | impl       | use an object to hold the interpreter state         | Allows cleaning up the interpreter. Enables pure functions for each instruction: take a state and return a state. Allows using a match-expression in the interpreter loop. |
|021|2025-12-30|           | impl       | keep the program and the state separate             | Separation of concerns. There are functions which only need the state or only need the program. |
|022|2026-01-01|           | IR         | `ref` and `deref` as separate instructions          | Keeps the grammar and implementation simple, albeit more verbose. Allowing them inline, such as `%z = ADD (deref %r) b` would complicate things. |
|   |          |           |            |                                                     | |
